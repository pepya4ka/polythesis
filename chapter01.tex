%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\chapter{Анализ методов составляющих спецификации}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

В данном разделе рассматриваются существующие методы извлечения составляющих формальной спецификации библиотек.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Методы извлечения спецификациии}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

Ниже перечислены основные методы извлечения формальной спецификации библиотек:
%
\begin{itemize*}
\item Автоматический вывод спецификаций;
\item Извлечение контрактов(предусловий и постусловий) для каждой функции;
\item Автоматический генератор комментариев;
\end{itemize*}
%

Методы извлечения генерации можно разбить на два типа: статические и динамические.
Для разных частей спецификации используются либо статический, либо динамический подход.
Например, для извлечения контрактов функции или окружения состояния автоматов используют динамические подходы. Они более точные, но, как правило, негативно сказываются на производительности.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Автоматический вывод спецификаций}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

Одним из способов генерировать спецификации является генератор спецификаций AutoJML \cite{autoJML_paper} \cite{autoJML}.
Он генерирует спецификации на основе формализмов других более высоких уровней, таких как диаграммы состояний UML или спецификации протоколов безопасности. Результатом является комбинация каркасного кода Java и спецификаций классов и методов JML.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Извлечение предусловий и постусловий для функции}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

Один из вариантов, с помощью которого можно извлекать контрактры (предусловия, постусловия и инварианты), это детектор инвариантов. Такие детекторы помогают но основе исходного кода библиотеки генерировать постусловия и предусловия для каждой отдельной функции в классах библиотеки.

Один из примеров реализации данного подхода является система Daikon \cite{daikon} \cite{daikon_paper}, позволяющая сообщать о вероятных инвариантов программы. Daikon запускает программу и наблюдает за значениями, которые вычисляются программой, и после чего сообщает о свойствах, которые были истинными для наблюдаемых функций.
Daikon может обнаруживать инварианты в программах на C, C++, Java, Perl и других. Можно выбрать анализ только для конкретной части программы, чтобы избежать перегруженности вывода.

В случае работы с файлами Java обнаружение состоит из двух частей:
%
\begin{itemize*}
\item Создание файлов трассировки данных
\item Запуск детектора инвариантов над файлами трассировки даных
\end{itemize*}
%
Просматривать инварианты после их генерации можно в текстовом виде или же с помощью дополнительных инструментов.

Недостатком данной утилиты является динамическое обнаружение, что сильно сказывается на производительности не в лучшую сторону.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Автоматический генератор комментариев}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

Решение данного подхода само по себе является довольно трудоемкой задачей.
Идея подхода состоит в том, чтобы автоматически генерировать комментарии, которые отражают поведение приложения, путем анализа сайтов вопросов и ответов (например, StackOverflow) или исходного кода программ, использующих библиотеку (например, репозитории на GitHub), для которой генерируется комментарии.

Одно из решений, которое бы помогло в решении данного подхода является автоматический генератор комментариев для исходного кода AutoComment \cite{AutoComment}.
Данный инструмент применяет методы обработки естественного языка (NLP) и эвристики проектирования, что позволяет улучшить описания кода для создания комментариев.
Утилита состоит из двух основных компонентов:
%
\begin{itemize*}
\item Компонент для создания базы данных отображений описания кода
\item Компонент для генерации комментариев для целевого программного обеспечения
\end{itemize*}
%

Другое решение - утилита CloCom \cite{CloCom}. Это исследовательский проект, который предлагает подход к автоматической генерации комментариев, путем анализа существующих репозиториев программного обеспечения.
В данном инструменте используются методы обнаружения клонирования кода для обнаружения похожих сегментов кода, а также анализ комментариев из некоторых сегментов кода для описания других подобных сегментов кода.
В качестве метода для выбора релевантных комментариев используется метод обработки естественного языка.

\nomenclature{NLP}{Natural language processing}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Выводы}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

В данной работе нам необходимо извлечь структуру формальной спецификации на языке LibSL \cite{libsl, libsl2}, а также извлечь аннотации, отражающие влияние функции на окружающую среду.
В данном разделе были рассмотрены существующие метод, решающие задачи автоматической генерации спецификаций, извлечение контрактов функций и автоматической генерации комментариев.
Анализ показал, что готового подхода и инструментария для извлечения LibSL-спецификации пока не существует, а адаптировать что-то готовое сложно.
Недостатком предложенных инструментов в 3 подходе является то, что для решения необходимо было бы использовать инструменты в неявном виде, то есть кроме самого инструмента понадобится дополнительная утилита для анализа автоматически сгенерированных комментариев и последующее извлечение нужной информации.